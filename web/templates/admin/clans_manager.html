{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>üè∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–∞–º–∏</h2>
    <div class="mb-3">
        <a href="#" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å –∫–ª–∞–Ω</a>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–õ–∏–¥–µ—Ä</th>
                <th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th>
                <th>–ö–∞–∑–Ω–∞</th>
                <th>–£—Ä–æ–≤–µ–Ω—å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
        {% for clan in clans %}
            <tr>
                <td>{{ clan.id }}</td>
                <td>{{ clan.name }}</td>
                <td>{{ clan.leader_id }}</td>
                <td>
                    {% set member_count = namespace(value=0) %}
                    {% for member in clan.clan_members %}
                        {% set member_count.value = member_count.value + 1 %}
                    {% endfor %}
                    {{ member_count.value }}
                </td>
                <td>{{ clan.balance }} ü™ô</td>
                <td>{{ clan.level }}</td>
                <td>
                    <button class="btn btn-sm btn-info" onclick="viewClan({{ clan.id }})">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    <button class="btn btn-sm btn-warning" onclick="editClan({{ clan.id }})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button class="btn btn-sm btn-danger" onclick="deleteClan({{ clan.id }})">–£–¥–∞–ª–∏—Ç—å</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
function viewClan(clanId) {
    alert('–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–ª–∞–Ω–∞ ID: ' + clanId);
}
function editClan(clanId) {
    alert('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–Ω–∞ ID: ' + clanId);
}
function deleteClan(clanId) {
    if (confirm('–£–¥–∞–ª–∏—Ç—å –∫–ª–∞–Ω? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!')) {
        alert('–ö–ª–∞–Ω ID ' + clanId + ' —É–¥–∞–ª—ë–Ω');
    }
}
</script>
{% endblock %}